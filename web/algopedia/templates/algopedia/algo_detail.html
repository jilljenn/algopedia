{% extends "algopedia/base.html" %}
{% block content %}

<h1>Algorithme = {{ object.name }}</h1>

<h3>Categories:</h3>
<ul class="categories">
{% for cat in object.category.all %}
    <li><a href="{% url 'algopedia:category-detail' cat.pk %}" class="label label-primary">{{ cat.name }}</a></li>
{% endfor %}
</ul>

<hr>

<h3>Description:</h3>
{{ object.description }}

<hr>

<h3>Implementations:</h3>
<p>
    <a href="{% url 'algopedia:implementation-create' object.pk %}" class="btn btn-default">Add mine</a>
</p>
<div class="modal fade" id="modal_implementation_detail" tabindex="-1" role="dialog" aria-labelledby="modal_implementation_detail">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="modal_implementation_detail_label">{{ object.name }}
                    by <span class="modal-title-user"></span>
                    in <span class="modal-title-lang"></span>
                </h4>
            </div>
            <div class="modal-body"></div>
            <div class="modal-footer">
                <a href="#" class="btn btn-default">Details</a>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<table class="table table-striped table-bordered">
    <tr>
        <th>Language</th><th>Author</th><th>Actions</th>
        {% if user.is_authenticated %}
            <th>Stars</th>
        {% endif %}
    </tr>
    {% for implem in object.implementation_set.all %}
        <tr>
            <td>{{ implem.lang.name }}</td>
            <td>{{ implem.user }}</td>
            <td>
                <a href="{% url 'algopedia:implementation-detail' implem.pk %}" class="implementation-detail-link btn btn-xs btn-default"
                    data-remote="false"
                    data-implementation-id="{{ implem.pk }}"
                    data-implementation-user="{{ implem.user }}"
                    data-implementation-lang="{{ implem.lang }}"
                    data-toggle="modal" data-target="#modal_implementation_detail">See</a>
                <a href="{% url 'algopedia:implementation-detail' implem.pk %}" class="btn btn-xs btn-default">Details</a>
                {% if implem.user.pk = user.pk %}
                    <a href="#" class="btn btn-xs btn-default">Edit</a>
                {% endif %}
            </td>
            {% if user.is_authenticated %}
                <td><input type="checkbox" name="star_{{ implem.pk }}" {% if implem.pk in stars %}checked="checked" {% endif %}/></td>
            {% endif %}
        </tr>
    {% empty %}
         <tr>
             <td colspan="2" style="text-align: center">There are no codes submitted yet !</td>
             <td><a href="{% url 'algopedia:implementation-create' object.pk %}" class="btn btn-xs btn-default">Add mine</a></td>
             {% if user.is_authenticated %}<td></td>{% endif %}
         </tr>
    {% endfor %}
</table>

{% endblock %}
